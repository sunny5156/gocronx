(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-167c71ec"],{"163b":function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));r("7f7f"),r("ac6a");var o=r("2b0e"),a=function(t){return o["default"]._.mapValues(t,(function(t){return t||void 0}))}},"24d2":function(t,e,r){"use strict";r.d(e,"e",(function(){return a})),r.d(e,"d",(function(){return i})),r.d(e,"f",(function(){return s})),r.d(e,"b",(function(){return l})),r.d(e,"c",(function(){return n})),r.d(e,"g",(function(){return c})),r.d(e,"a",(function(){return u}));var o=r("b775");function a(t){return Object(o["a"])({url:"/project",method:"get",params:t})}function i(t){return Object(o["a"])({url:"/project/".concat(t),method:"get"})}function s(t){return Object(o["a"])({url:"project/user/list/".concat(t.project_id),method:"get",params:t})}function l(t){return Object(o["a"])({url:"/project/store",method:"post",data:t})}function n(t){return Object(o["a"])({url:"/user/search",method:"post",data:t})}function c(t){return Object(o["a"])({url:"/project/user/remove/".concat(t),method:"post"})}function u(t){return Object(o["a"])({url:"/project/user/store",method:"post",data:t})}},4529:function(t,e,r){var o=r("ee7c");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=r("2fb2").default;a("69ea2d0c",o,!0,{})},"4726b":function(t,e,r){var o=r("bdae");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=r("2fb2").default;a("debb8d92",o,!0,{})},4882:function(t,e,r){var o=r("8174");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=r("2fb2").default;a("4dde37cc",o,!0,{})},8174:function(t,e,r){e=t.exports=r("2350")(!1),e.push([t.i,"",""])},"83b7":function(t,e,r){"use strict";r.r(e);var o=r("24d2"),a=r("163b"),i=(r("7f7f"),{name:"AddProject",props:{open:{type:Boolean,default:!1,required:!0},type:{required:!0,default:"add",type:String},formData:{required:!0,default:function(){},type:Object}},data:function(){return{title:"新增",form:{id:"",name:"",remark:""},formRules:{name:[{required:!0,message:"请输入项目名称",trigger:"blur"}],remark:[{required:!0,message:"请输入项目备注",trigger:"blur"}]}}},created:function(){},mounted:function(){},methods:{submit:function(){var t=this;this.$refs["form"].validate((function(e){e&&Object(o["b"])(t.form).then((function(){t.$emit("reload"),t.onClose()}))}))},onClose:function(){this.form={id:"",name:"",remark:""},this.$refs["form"].resetFields(),this.$emit("update:open",!1)}},filters:{},watch:{open:function(t){t&&"edit"===this.type&&(this.title="编辑",this.form.id=this.formData.id,this.form.name=this.formData.name,this.form.remark=this.formData.remark)}}}),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{directives:[{name:"drag-move",rawName:"v-drag-move"}],staticClass:"task-log",attrs:{title:t.title+"项目",visible:t.open,"before-close":t.onClose,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"600px"}},[[r("el-form",{ref:"form",attrs:{model:t.form,size:"mini",rules:t.formRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"项目名称",prop:"name"}},[r("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"备注",prop:"remark"}},[r("el-input",{attrs:{type:"textarea",rows:5,size:"medium",width:"100"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1)],t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:t.onClose}},[t._v("取 消")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],2)},l=[],n=r("2455");function c(t){r("4882")}var u=!1,d=c,m="data-v-1f9adb5f",f=null,p=Object(n["a"])(i,s,l,u,d,m,f),h=p.exports,y=r("d732"),_=r("b199"),v={name:"List",components:{addProject:h,addTask:y["a"]},data:function(){return{newDate:(new Date).getTime(),listData:[],listLoading:!1,users:[],userTotal:0,listQuery:{page_size:20,page:1,id:"",name:""},isAdmin:JSON.parse(localStorage.getItem("userInfo")).is_admin,total:0,addProjectOption:{open:!1,formData:{},type:"add"},addTaskOption:{open:!1,taskData:{},type:"fromProject",selectOptions:{}},project:[],hosts:[]}},created:function(){this.getProjectOptions(),this.getHostOptions(),this.renderList()},mounted:function(){},methods:{handleConfigManager:function(t){this.$router.push("/project/list/user/".concat(t))},handleTaskList:function(t){this.$router.push("/task/manager/timing-tasks?project_id=".concat(t.id))},getProjectOptions:function(){var t=this;Object(_["h"])().then((function(e){t.project=e.data||[]}))},getHostOptions:function(){var t=this;Object(_["f"])().then((function(e){t.hosts=e.data||[]}))},handleAddTask:function(t,e){this.addTaskOption={open:!0,type:t,taskData:e,selectOptions:{hosts:this.hosts,project:this.project}}},handleAddProject:function(t,e){this.addProjectOption={open:!0,type:t,formData:e}},renderList:function(){var t=this;this.listLoading=!0;var e=Object(a["a"])(this.listQuery);Object(o["e"])(e).then((function(e){var r=e.data.data;t.total=e.data.total;var o=t._.cloneDeep(r);t.listData=[],t.listData=o,document.querySelector(".el-table__body-wrapper").scrollTop=0,t.listLoading=!1,t.$refs["table"].doLayout()})).catch((function(){t.listLoading=!1}))},handleFilter:function(){this.newDate=(new Date).getTime(),this.listQuery.page=1,this.renderList()},handleSizeChange:function(t){this.listQuery.page=1,this.listQuery.page_size=t,this.renderList()},handleCurrentChange:function(t){this.listQuery.page=t,this.renderList()},clearSearch:function(){this.$refs.listQuery.resetFields(),this.newDate=(new Date).getTime(),this.renderList()}},filters:{},watch:{}},b=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"header-box"},[r("el-form",{ref:"listQuery",staticClass:"advt-form-inline",attrs:{inline:!0,model:t.listQuery,size:"mini"}},[r("el-form-item",{attrs:{label:"项目ID",prop:"id"}},[r("el-input",{attrs:{placeholder:"请输入项目ID"},model:{value:t.listQuery.id,callback:function(e){t.$set(t.listQuery,"id","string"===typeof e?e.trim():e)},expression:"listQuery.id"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"项目名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入项目名称"},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name","string"===typeof e?e.trim():e)},expression:"listQuery.name"}})],1),t._v(" "),r("el-form-item",[r("el-button",{directives:[{name:"debounce",rawName:"v-debounce:listQuery",value:t.handleFilter,expression:"handleFilter",arg:"listQuery"}],attrs:{"data-type":"search",type:"primary"}},[t._v("搜索")]),t._v(" "),r("el-button",{directives:[{name:"debounce",rawName:"v-debounce:listQuery",value:t.clearSearch,expression:"clearSearch",arg:"listQuery"}],attrs:{"data-type":"clear"}},[t._v("清空")])],1)],1),t._v(" "),r("el-row",{staticClass:"right-row"},[t.isAdmin?r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.handleAddProject("add",{})}}},[t._v("新增")]):t._e()],1)],1),t._v(" "),r("div",{staticClass:"content-box"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading.lock",value:t.listLoading,expression:"listLoading",modifiers:{lock:!0}}],key:t.newDate,ref:"table",staticStyle:{width:"100%"},attrs:{data:t.listData,"element-loading-text":"努力加载中",border:""}},[r("el-table-column",{attrs:{prop:"id",width:"100",label:"项目ID"}}),t._v(" "),r("el-table-column",{attrs:{prop:"name",label:"项目名称"}}),t._v(" "),r("el-table-column",{attrs:{prop:"remark",label:"备注"}}),t._v(" "),r("el-table-column",{attrs:{prop:"account",label:"创建者"}}),t._v(" "),t.isAdmin?r("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(r){return t.handleConfigManager(e.row.id)}}},[t._v("人员管理")]),t._v(" "),r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(r){return t.handleAddTask("fromProject",e.row)}}},[t._v("添加任务")]),t._v(" "),r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(r){return t.handleTaskList(e.row)}}},[t._v("任务列表")])]}}],null,!1,3646909628)}):t._e()],1),t._v(" "),r("div",{staticClass:"pagination-container"},[r("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper",small:"","current-page":t.listQuery.page,"page-sizes":[20,50,100,200],"page-size":t.listQuery.page_size,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),r("add-project",t._b({on:{reload:t.renderList}},"add-project",t.addProjectOption,!1,!0)),t._v(" "),r("add-task",t._b({},"add-task",t.addTaskOption,!1,!0))],1)},k=[];function g(t){r("4529")}var j=!1,w=g,x="data-v-82da3c7c",D=null,O=Object(n["a"])(v,b,k,j,w,x,D);e["default"]=O.exports},b199:function(t,e,r){"use strict";r.d(e,"h",(function(){return a})),r.d(e,"f",(function(){return i})),r.d(e,"i",(function(){return s})),r.d(e,"e",(function(){return l})),r.d(e,"c",(function(){return n})),r.d(e,"j",(function(){return c})),r.d(e,"b",(function(){return u})),r.d(e,"g",(function(){return d})),r.d(e,"d",(function(){return m})),r.d(e,"a",(function(){return f})),r.d(e,"k",(function(){return p}));var o=r("b775");function a(){return Object(o["a"])({url:"/project/all",method:"get"})}function i(){return Object(o["a"])({url:"/host/all",method:"get"})}function s(t){return Object(o["a"])({url:"/task",method:"get",params:t})}function l(t,e){return Object(o["a"])({url:"/task/enable/".concat(e),method:"post",data:t})}function n(t,e){return Object(o["a"])({url:"/task/enable/".concat(e),method:"post",data:t})}function c(t){return Object(o["a"])({url:"/task/run/".concat(t),method:"get"})}function u(t){return Object(o["a"])({url:"/task/remove/".concat(t),method:"post"})}function d(t){return Object(o["a"])({url:"task/log",method:"get",params:t})}function m(t){return Object(o["a"])({url:"/task/store",method:"post",data:t})}function f(){return Object(o["a"])({url:"/task/log/clear",method:"post"})}function p(t){return Object(o["a"])({url:"/task/log/stop",method:"post",data:t})}},bdae:function(t,e,r){e=t.exports=r("2350")(!1),e.push([t.i,".task-log .el-dialog .el-dialog__body[data-v-deec6096]{max-height:800px;overflow:auto}.el-form-item p[data-v-deec6096]{margin:0;color:#f56c6c;font-size:12px}",""])},d732:function(t,e,r){"use strict";r("28a5"),r("ac6a"),r("7f7f");var o=r("b199"),a={name:"AddTask",props:{open:{type:Boolean,required:!0,default:!1},taskData:{type:Object,required:!0,default:function(){}},type:{type:String,required:!0,default:"add"},selectOptions:{type:Object,required:!0,default:function(){}}},data:function(){return{title:"添加",form:{id:"",name:"",tag:"",level:1,dependency_status:1,dependency_task_id:"",spec:"",protocol:2,http_method:1,command:"",host_id:"",timeout:0,multi:2,notify_status:1,notify_type:2,notify_receiver_id:"",notify_keyword:"",retry_times:0,retry_interval:0,remark:"",selectedHosts:[],project_id:""},formRules:{name:[{required:!0,message:"请输入任务名称",trigger:"blur"}],spec:[{required:!0,message:"请输入crontab表达式",trigger:"blur"}],command:[{required:!0,message:"请输入命令",trigger:"blur"}],timeout:[{type:"number",required:!0,message:"请输入有效的任务超时时间",trigger:"blur"}],retry_times:[{type:"number",required:!0,message:"请输入有效的任务执行失败重试次数",trigger:"blur"}],retry_interval:[{type:"number",required:!0,message:"请输入有效的任务执行失败，重试间隔时间",trigger:"blur"}],notify_keyword:[{required:!0,message:"请输入要匹配的任务执行输出关键字",trigger:"blur"}],selectedHosts:[{required:!0,message:"请选择任务节点",trigger:"change"}],project_id:[{required:!0,message:"请选择所属项目",trigger:"change"}],http_method:[{required:!0,message:"请选择请求方法",trigger:"change"}]},httpMethods:[{value:1,label:"get"},{value:2,label:"post"}],protocolList:[{value:1,label:"http"},{value:2,label:"shell"}],levelList:[{value:1,label:"主任务"},{value:2,label:"子任务"}],dependencyStatusList:[{value:1,label:"强依赖"},{value:2,label:"弱依赖"}],runStatusList:[{value:2,label:"是"},{value:1,label:"否"}],notifyStatusList:[{value:1,label:"不通知"},{value:2,label:"失败通知"},{value:3,label:"总是通知"},{value:4,label:"关键字匹配通知"}],notifyTypes:[{value:2,label:"邮件"},{value:3,label:"Slack"},{value:4,label:"WebHook"}],hosts:[],mailUsers:[],slackChannels:[],selectedMailNotifyIds:[],selectedSlackNotifyIds:[],project:[],project_id:""}},created:function(){},computed:{commandPlaceholder:function(){return 1===this.form.protocol?"请输入URL地址":"请输入shell命令"}},mounted:function(){},methods:{submit:function(){var t=this;this.$refs["form"].validate((function(e){if(!e)return!1;if(2===t.form.protocol&&0===t.form.selectedHosts.length)return t.$message.error("请选择任务节点"),!1;if(2===t.form.protocol&&""===t.form.project_id)return t.$message.error("请选择所属项目"),!1;if(t.form.notify_status>1){if(2===t.form.notify_type&&0===t.selectedMailNotifyIds.length)return t.$message.error("请选择邮件接收用户"),!1;if(3===t.form.notify_type&&0===t.selectedSlackNotifyIds.length)return t.$message.error("请选择Slack Channel"),!1}t.save()}))},save:function(){var t=this;2===this.form.protocol&&this.form.selectedHosts.length>0&&(this.form.host_id=this.form.selectedHosts.join(",")),this.form.notify_status>1&&2===this.form.notify_type&&(this.form.notify_receiver_id=this.selectedMailNotifyIds.join(",")),this.form.notify_status>1&&3===this.form.notify_type&&(this.form.notify_receiver_id=this.selectedSlackNotifyIds.join(",")),Object(o["d"])(this.form).then((function(e){"fromProject"!==t.type&&t.$emit("reload"),t.onClose()})).catch((function(e){t.$message.error(e)}))},onClose:function(){this.form={id:"",name:"",tag:"",level:1,dependency_status:1,dependency_task_id:"",spec:"",protocol:2,http_method:1,command:"",host_id:"",timeout:0,multi:2,notify_status:1,notify_type:2,notify_receiver_id:"",notify_keyword:"",retry_times:0,retry_interval:0,remark:"",selectedHosts:[],project_id:""},this.$refs["form"].resetFields(),this.$emit("update:open",!1)}},filters:{},watch:{open:function(t){var e=this;if(t){if(this.project=this.selectOptions.project,this.hosts=this.selectOptions.hosts,"edit"===this.type&&(this.title="编辑",this.form.id=this.taskData.id,this.form.name=this.taskData.name,this.form.tag=this.taskData.tag,this.form.level=this.taskData.level,this.taskData.dependency_status&&(this.form.dependency_status=this.taskData.dependency_status),this.form.dependency_task_id=this.taskData.dependency_task_id,this.form.spec=this.taskData.spec,this.form.protocol=this.taskData.protocol,this.taskData.http_method&&(this.form.http_method=this.taskData.http_method),this.form.command=this.taskData.command,this.form.timeout=this.taskData.timeout,this.form.multi=this.taskData.multi?1:2,this.form.notify_keyword=this.taskData.notify_keyword,this.form.notify_status=this.taskData.notify_status+1,this.form.notify_receiver_id=this.taskData.notify_receiver_id,this.taskData.notify_type&&(this.form.notify_type=this.taskData.notify_type+1),this.form.retry_times=this.taskData.retry_times,this.form.retry_interval=this.taskData.retry_interval,this.form.remark=this.taskData.remark,this.form.project_id=this.taskData.project_id,this.taskData.hosts=this.taskData.hosts||[],2===this.form.protocol&&this.taskData.hosts.forEach((function(t){e.form.selectedHosts.push(t.host_id)})),this.form.notify_status>1)){var r=this.form.notify_receiver_id.split(",");2===this.form.notify_type?r.forEach((function(t){e.selectedMailNotifyIds.push(parseInt(t))})):3===this.form.notify_type&&r.forEach((function(t){e.selectedSlackNotifyIds.push(parseInt(t))}))}"fromProject"===this.type&&(this.form.project_id=this.taskData.id)}}}},i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{directives:[{name:"drag-move",rawName:"v-drag-move"}],staticClass:"task-log dialog-limit-height-has-btn",attrs:{title:t.title+"任务",visible:t.open,"before-close":t.onClose,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"1500px"}},[[r("el-form",{ref:"form",attrs:{model:t.form,size:"mini",rules:t.formRules,"label-width":"180px"}},[r("el-form-item",{attrs:{label:"任务名称",prop:"name"}},[r("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"===typeof e?e.trim():e)},expression:"form.name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"标签",prop:"tag"}},[r("el-input",{attrs:{placeholder:"通过标签将任务分组"},model:{value:t.form.tag,callback:function(e){t.$set(t.form,"tag","string"===typeof e?e.trim():e)},expression:"form.tag"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"所属项目",prop:"project_id"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:t.form.project_id,callback:function(e){t.$set(t.form,"project_id",e)},expression:"form.project_id"}},t._l(t.project,(function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),r("el-form-item",{attrs:{label:"任务类型"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:""!==t.form.id},model:{value:t.form.level,callback:function(e){t.$set(t.form,"level","string"===typeof e?e.trim():e)},expression:"form.level"}},t._l(t.levelList,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),r("p",[t._v("主任务可以配置多个子任务, 当主任务执行完成后，自动执行子任务任务类型新增后不能变更")])],1),t._v(" "),r("el-form-item",{attrs:{label:"依赖关系"}},[r("el-select",{staticStyle:{width:"100%"},model:{value:t.form.dependency_status,callback:function(e){t.$set(t.form,"dependency_status","string"===typeof e?e.trim():e)},expression:"form.dependency_status"}},t._l(t.dependencyStatusList,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),r("p",[t._v("强依赖: 主任务执行成功，才会运行子任务")]),t._v(" "),r("p",[t._v("弱依赖: 无论主任务执行是否成功，都会运行子任务")])],1),t._v(" "),1===t.form.level?r("el-form-item",{attrs:{label:"子任务ID",prop:"dependency_task_id"}},[r("el-input",{attrs:{placeholder:"多个ID逗号分隔"},model:{value:t.form.dependency_task_id,callback:function(e){t.$set(t.form,"dependency_task_id","string"===typeof e?e.trim():e)},expression:"form.dependency_task_id"}})],1):t._e(),t._v(" "),r("el-form-item",{attrs:{label:"crontab表达式",prop:"spec"}},[r("el-input",{attrs:{placeholder:"秒 分 时 天 月 周"},model:{value:t.form.spec,callback:function(e){t.$set(t.form,"spec",e)},expression:"form.spec"}}),t._v(" "),r("p",[t._v("crontab表达式格式: 秒 分 时 天 月 周")])],1),t._v(" "),r("el-form-item",{attrs:{label:"执行方式"}},[r("el-select",{staticStyle:{width:"30%"},model:{value:t.form.protocol,callback:function(e){t.$set(t.form,"protocol","string"===typeof e?e.trim():e)},expression:"form.protocol"}},t._l(t.protocolList,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),1===t.form.protocol?r("el-form-item",{attrs:{label:"请求方法",prop:"http_method"}},[r("el-select",{key:"http-method",staticStyle:{width:"30%"},model:{value:t.form.http_method,callback:function(e){t.$set(t.form,"http_method","string"===typeof e?e.trim():e)},expression:"form.http_method"}},t._l(t.httpMethods,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1):t._e(),t._v(" "),2===t.form.protocol?r("el-form-item",{attrs:{label:"任务节点",prop:"selectedHosts"}},[r("el-select",{key:"shell",staticStyle:{width:"100%"},attrs:{filterable:"",multiple:"",placeholder:"请选择"},model:{value:t.form.selectedHosts,callback:function(e){t.$set(t.form,"selectedHosts",e)},expression:"form.selectedHosts"}},t._l(t.hosts,(function(t){return r("el-option",{key:t.id,attrs:{label:t.alias+" - "+t.name,value:t.id}})})),1)],1):t._e(),t._v(" "),r("el-form-item",{attrs:{label:"命令",prop:"command"}},[r("el-input",{attrs:{type:"textarea",rows:5,size:"medium",width:"100",placeholder:t.commandPlaceholder},model:{value:t.form.command,callback:function(e){t.$set(t.form,"command",e)},expression:"form.command"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"任务超时时间",prop:"timeout"}},[r("el-input",{model:{value:t.form.timeout,callback:function(e){t.$set(t.form,"timeout",t._n("string"===typeof e?e.trim():e))},expression:"form.timeout"}}),t._v(" "),r("p",[t._v("任务执行超时强制结束, 取值0-86400(秒), 默认0, 不限制")])],1),t._v(" "),r("el-form-item",{attrs:{label:"单实例运行"}},[r("el-select",{staticStyle:{width:"100%"},model:{value:t.form.multi,callback:function(e){t.$set(t.form,"multi","string"===typeof e?e.trim():e)},expression:"form.multi"}},t._l(t.runStatusList,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),r("p",[t._v("单实例运行, 前次任务未执行完成，下次任务调度时间到了是否要执行, 即是否允许多进程执行同一任务")])],1),t._v(" "),r("el-form-item",{attrs:{label:"任务失败重试次数",prop:"retry_times"}},[r("el-input",{attrs:{placeholder:"0 - 10, 默认0，不重试"},model:{value:t.form.retry_times,callback:function(e){t.$set(t.form,"retry_times",t._n("string"===typeof e?e.trim():e))},expression:"form.retry_times"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"任务失败重试间隔时间",prop:"retry_interval"}},[r("el-input",{attrs:{placeholder:"0 - 3600 (秒), 默认0，执行系统默认策略"},model:{value:t.form.retry_interval,callback:function(e){t.$set(t.form,"retry_interval",t._n("string"===typeof e?e.trim():e))},expression:"form.retry_interval"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"任务通知"}},[r("el-select",{staticStyle:{width:"100%"},model:{value:t.form.notify_status,callback:function(e){t.$set(t.form,"notify_status","string"===typeof e?e.trim():e)},expression:"form.notify_status"}},t._l(t.notifyStatusList,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),1!==t.form.notify_status?r("el-form-item",{attrs:{label:"通知类型"}},[r("el-select",{staticStyle:{width:"100%"},model:{value:t.form.notify_type,callback:function(e){t.$set(t.form,"notify_type","string"===typeof e?e.trim():e)},expression:"form.notify_type"}},t._l(t.notifyTypes,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1):t._e(),t._v(" "),1!==t.form.notify_status&&2===t.form.notify_type?r("el-form-item",{attrs:{label:"接收用户"}},[r("el-select",{key:"notify-mail",staticStyle:{width:"100%"},attrs:{filterable:"",multiple:"",placeholder:"请选择"},model:{value:t.selectedMailNotifyIds,callback:function(e){t.selectedMailNotifyIds=e},expression:"selectedMailNotifyIds"}},t._l(t.mailUsers,(function(t){return r("el-option",{key:t.id,attrs:{label:t.username,value:t.id}})})),1)],1):t._e(),t._v(" "),1!==t.form.notify_status&&3===t.form.notify_type?r("el-form-item",{attrs:{label:"发送Channel"}},[r("el-select",{key:"notify-slack",staticStyle:{width:"100%"},attrs:{filterable:"",multiple:"",placeholder:"请选择"},model:{value:t.selectedSlackNotifyIds,callback:function(e){t.selectedSlackNotifyIds=e},expression:"selectedSlackNotifyIds"}},t._l(t.slackChannels,(function(t){return r("el-option",{key:t.id,attrs:{label:t.name,selected:"true",value:t.id}})})),1)],1):t._e(),t._v(" "),4===t.form.notify_status?r("el-form-item",{attrs:{label:"任务执行输出关键字",prop:"notify_keyword"}},[r("el-input",{attrs:{placeholder:"任务执行输出中包含此关键字将触发通知"},model:{value:t.form.notify_keyword,callback:function(e){t.$set(t.form,"notify_keyword","string"===typeof e?e.trim():e)},expression:"form.notify_keyword"}})],1):t._e(),t._v(" "),r("el-form-item",{attrs:{label:"备注",prop:"remark"}},[r("el-input",{attrs:{type:"textarea",rows:3,size:"medium",width:"100"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1)],t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:t.onClose}},[t._v("取 消")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],2)},s=[],l=r("2455");function n(t){r("4726b")}var c=!1,u=n,d="data-v-deec6096",m=null,f=Object(l["a"])(a,i,s,c,u,d,m);e["a"]=f.exports},ee7c:function(t,e,r){e=t.exports=r("2350")(!1),e.push([t.i,"",""])}}]);