(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d66adac"],{"163b":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("7f7f"),a("ac6a");var o=a("2b0e"),r=function(t){return o["default"]._.mapValues(t,(function(t){return t||void 0}))}},3089:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"",""])},"8b9e":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"",""])},b0bc:function(t,e,a){var o=a("3089");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=a("2fb2").default;r("e75aa450",o,!0,{})},c78e:function(t,e,a){var o=a("8b9e");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=a("2fb2").default;r("0cf0b6b4",o,!0,{})},d8a6:function(t,e,a){"use strict";a.r(e);var o=a("c24f"),r=a("163b"),i=(a("7f7f"),{name:"AddUser",props:{open:{type:Boolean,default:!1,required:!0},type:{required:!0,default:"add",type:String},formData:{required:!0,default:function(){},type:Object}},data:function(){return{title:"新增",form:{id:"",account:"",name:"",email:"",is_admin:0,password:"",confirm_password:"",status:1},formRules:{account:[{required:!0,message:"请输入用户名",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],email:[{type:"email",required:!0,message:"请输入有效邮箱地址",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],confirm_password:[{required:!0,message:"请再次输入密码",trigger:"blur"}]}}},created:function(){},mounted:function(){},methods:{submit:function(){var t=this;this.$refs["form"].validate((function(e){e&&Object(o["a"])(t.form).then((function(){t.$emit("reload"),t.onClose()}))}))},onClose:function(){this.form={id:"",account:"",name:"",email:"",is_admin:0,password:"",confirm_password:"",status:1},this.$refs["form"].resetFields(),this.$emit("update:open",!1)}},filters:{},watch:{open:function(t){t&&"edit"===this.type&&(this.title="编辑",this.form.id=this.formData.id,this.form.account=this.formData.account,this.form.name=this.formData.name,this.form.email=this.formData.email,this.form.is_admin=this.formData.is_admin,this.form.status=this.formData.status)}}}),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{directives:[{name:"drag-move",rawName:"v-drag-move"}],staticClass:"task-log",attrs:{title:t.title+"用户",visible:t.open,"before-close":t.onClose,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"600px"}},[[a("el-form",{ref:"form",attrs:{model:t.form,size:"mini",rules:t.formRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"账号",prop:"account"}},[a("el-input",{model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),t.form.id?t._e():[a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"confirm_password"}},[a("el-input",{attrs:{type:"password"},model:{value:t.form.confirm_password,callback:function(e){t.$set(t.form,"confirm_password",e)},expression:"form.confirm_password"}})],1)],t._v(" "),a("el-form-item",{attrs:{label:"角色",prop:"is_admin"}},[a("el-radio-group",{model:{value:t.form.is_admin,callback:function(e){t.$set(t.form,"is_admin",e)},expression:"form.is_admin"}},[a("el-radio",{attrs:{label:0}},[t._v("普通用户")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("管理员")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-radio-group",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("el-radio",{attrs:{label:1}},[t._v("启用")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("禁用")])],1)],1)],2)],t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.onClose}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],2)},n=[],l=a("2455");function c(t){a("b0bc")}var u=!1,d=c,m="data-v-1558e768",f=null,p=Object(l["a"])(i,s,n,u,d,m,f),b=p.exports,v=a("3305"),h={name:"List",components:{addUser:b,editPassword:v["a"]},data:function(){return{newDate:(new Date).getTime(),listData:[],listLoading:!1,users:[],userTotal:0,listQuery:{page_size:20,page:1},isAdmin:JSON.parse(localStorage.getItem("userInfo")).is_admin,addUserOption:{open:!1,formData:{},type:"add"},editPasswordOption:{open:!1,formData:{}},total:0}},created:function(){this.renderList()},mounted:function(){},methods:{handleEditPassword:function(t){this.editPasswordOption={open:!0,formData:t}},openUserDialog:function(t,e){this.addUserOption={open:!0,type:t,formData:e}},changeStatus:function(t){t.status?Object(o["e"])(t.id).then((function(){t.status=1})):Object(o["c"])(t.id).then((function(){t.status=0}))},formatRole:function(t,e){return 1===t[e.property]?"管理员":"普通用户"},renderList:function(){var t=this;this.listLoading=!0;var e=Object(r["a"])(this.listQuery);Object(o["f"])(e).then((function(e){var a=e.data.data;t.total=e.data.total;var o=t._.cloneDeep(a);t.listData=[],t.listData=o,document.querySelector(".el-table__body-wrapper").scrollTop=0,t.listLoading=!1,t.$refs["table"].doLayout()})).catch((function(){t.listLoading=!1}))},remove:function(t){var e=this;this.$confirm("确认要删除此用户吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["b"])(t.id),e.renderList()})).catch((function(){}))},handleSizeChange:function(t){this.listQuery.page=1,this.listQuery.page_size=t,this.renderList()},handleCurrentChange:function(t){this.listQuery.page=t,this.renderList()}},filters:{},watch:{}},g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"header-box"},[a("el-row",{staticClass:"right-row"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.openUserDialog("add",{})}}},[t._v("新增")])],1)],1),t._v(" "),a("div",{staticClass:"content-box"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading.lock",value:t.listLoading,expression:"listLoading",modifiers:{lock:!0}}],key:t.newDate,ref:"table",staticStyle:{width:"100%"},attrs:{data:t.listData,"element-loading-text":"努力加载中",border:""}},[a("el-table-column",{attrs:{prop:"id",label:"用户id"}}),t._v(" "),a("el-table-column",{attrs:{prop:"account",label:"账号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),t._v(" "),a("el-table-column",{attrs:{prop:"is_admin",formatter:t.formatRole,label:"角色"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-value":1,"inactive-vlaue":0,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return t.changeStatus(e.row)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}})]}}])}),t._v(" "),this.isAdmin?a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.openUserDialog("edit",e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return t.handleEditPassword(e.row)}}},[t._v("修改密码")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.remove(e.row)}}},[t._v("删除")])]}}],null,!1,1329918089)}):t._e()],1),t._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper",small:"","current-page":t.listQuery.page,"page-sizes":[20,50,100,200],"page-size":t.listQuery.page_size,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("add-user",t._b({on:{reload:t.renderList}},"add-user",t.addUserOption,!1,!0)),t._v(" "),a("edit-password",t._b({on:{reload:t.renderList}},"edit-password",t.editPasswordOption,!1,!0))],1)},_=[];function w(t){a("c78e")}var y=!1,k=w,x="data-v-09f30132",D=null,C=Object(l["a"])(h,g,_,y,k,x,D);e["default"]=C.exports}}]);